{"ast":null,"code":"import _classCallCheck from \"/home/boyban/Epitech/Tek3/Part-Time/technical-test-gustave/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/boyban/Epitech/Tek3/Part-Time/technical-test-gustave/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/boyban/Epitech/Tek3/Part-Time/technical-test-gustave/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/boyban/Epitech/Tek3/Part-Time/technical-test-gustave/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/boyban/Epitech/Tek3/Part-Time/technical-test-gustave/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/boyban/Epitech/Tek3/Part-Time/technical-test-gustave/src/components/Session/withAuthorization.js\";\nimport React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { compose } from 'recompose';\nimport { withFirebase } from '../Firebase';\nimport * as ROUTES from '../../constants/routes';\nimport AuthUserContext from './context';\n\nvar withAuthorization = function withAuthorization(condition) {\n  return function (Component) {\n    var WithAuthorization =\n    /*#__PURE__*/\n    function (_React$Component) {\n      _inherits(WithAuthorization, _React$Component);\n\n      function WithAuthorization() {\n        _classCallCheck(this, WithAuthorization);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(WithAuthorization).apply(this, arguments));\n      }\n\n      _createClass(WithAuthorization, [{\n        key: \"componentDidMount\",\n        value: function componentDidMount() {\n          var _this = this;\n\n          this.listener = this.props.firebase.auth.onAuthStateChanged(function (authUser) {\n            if (!condition(authUser)) {\n              _this.props.history.push(ROUTES.SIGN_IN);\n            }\n          });\n        }\n      }, {\n        key: \"componentWillUnmount\",\n        value: function componentWillUnmount() {\n          this.listener();\n        }\n      }, {\n        key: \"render\",\n        value: function render() {\n          return React.createElement(Component, Object.assign({}, this.props, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 28\n            },\n            __self: this\n          }));\n        }\n      }]);\n\n      return WithAuthorization;\n    }(React.Component);\n\n    return compose(withRouter, withFirebase)(WithAuthorization);\n  };\n};\n\nexport default withAuthorization;","map":{"version":3,"sources":["/home/boyban/Epitech/Tek3/Part-Time/technical-test-gustave/src/components/Session/withAuthorization.js"],"names":["React","withRouter","compose","withFirebase","ROUTES","AuthUserContext","withAuthorization","condition","Component","WithAuthorization","listener","props","firebase","auth","onAuthStateChanged","authUser","history","push","SIGN_IN"],"mappings":";;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,OAAT,QAAwB,WAAxB;AAEA,SAASC,YAAT,QAA6B,aAA7B;AACA,OAAO,KAAKC,MAAZ,MAAwB,wBAAxB;AACA,OAAOC,eAAP,MAA4B,WAA5B;;AAGA,IAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,CAAAC,SAAS;AAAA,SAAI,UAAAC,SAAS,EAAI;AAAA,QAC1CC,iBAD0C;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA,4CAExB;AAAA;;AAChB,eAAKC,QAAL,GAAgB,KAAKC,KAAL,CAAWC,QAAX,CAAoBC,IAApB,CAAyBC,kBAAzB,CACZ,UAAAC,QAAQ,EAAI;AACR,gBAAI,CAACR,SAAS,CAACQ,QAAD,CAAd,EAA0B;AACtB,cAAA,KAAI,CAACJ,KAAL,CAAWK,OAAX,CAAmBC,IAAnB,CAAwBb,MAAM,CAACc,OAA/B;AACH;AACJ,WALW,CAAhB;AAOH;AAV2C;AAAA;AAAA,+CAYrB;AACnB,eAAKR,QAAL;AACH;AAd2C;AAAA;AAAA,iCAgBnC;AACL,iBACI,oBAAC,SAAD,oBAAe,KAAKC,KAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADJ;AAGH;AApB2C;;AAAA;AAAA,MAChBX,KAAK,CAACQ,SADU;;AAuBhD,WAAON,OAAO,CACVD,UADU,EAEVE,YAFU,CAAP,CAGLM,iBAHK,CAAP;AAIH,GA3BkC;AAAA,CAAnC;;AA6BA,eAAeH,iBAAf","sourcesContent":["import React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { compose } from 'recompose';\n\nimport { withFirebase } from '../Firebase';\nimport * as ROUTES from '../../constants/routes';\nimport AuthUserContext from './context';\n\n\nconst withAuthorization = condition => Component => {\n    class WithAuthorization extends React.Component {\n        componentDidMount() {\n            this.listener = this.props.firebase.auth.onAuthStateChanged(\n                authUser => {\n                    if (!condition(authUser)) {\n                        this.props.history.push(ROUTES.SIGN_IN);\n                    }\n                },\n            );\n        }\n\n        componentWillUnmount() {\n            this.listener();\n        }\n\n        render() {\n            return (\n                <Component {...this.props} />\n            );\n        }\n    }\n\n    return compose(\n        withRouter,\n        withFirebase,\n    )(WithAuthorization);\n};\n\nexport default withAuthorization;"]},"metadata":{},"sourceType":"module"}