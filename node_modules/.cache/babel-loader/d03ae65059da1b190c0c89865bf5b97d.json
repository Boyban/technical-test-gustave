{"ast":null,"code":"import _defineProperty from \"/home/boyban/Epitech/Tek3/Part-Time/technical-test-gustave/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/home/boyban/Epitech/Tek3/Part-Time/technical-test-gustave/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/boyban/Epitech/Tek3/Part-Time/technical-test-gustave/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/boyban/Epitech/Tek3/Part-Time/technical-test-gustave/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/boyban/Epitech/Tek3/Part-Time/technical-test-gustave/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/boyban/Epitech/Tek3/Part-Time/technical-test-gustave/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/boyban/Epitech/Tek3/Part-Time/technical-test-gustave/src/components/Home/index.js\";\nimport React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { compose } from 'recompose';\nimport './style.css';\nimport { withFirebase } from '../Firebase';\nimport SignInPage from \"../SignIn\";\nimport * as ROUTES from \"../../constants/routes\";\nimport AuthUserContext from \"../Session/context\";\nimport withAuthorization from \"../Session/withAuthorization\";\n\nvar HomePage = function HomePage() {\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 13\n    },\n    __self: this\n  }, React.createElement(AuthUserContext.Consumer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 14\n    },\n    __self: this\n  }, function (authUser) {\n    return React.createElement(Home, {\n      context: authUser,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 15\n      },\n      __self: this\n    });\n  }));\n};\n\nvar HomePageBase =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(HomePageBase, _Component);\n\n  function HomePageBase(props) {\n    var _this;\n\n    _classCallCheck(this, HomePageBase);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(HomePageBase).call(this, props));\n\n    _this.onChange = function (event) {\n      _this.setState(_defineProperty({}, event.target.name, event.target.value));\n    };\n\n    _this.createRandomCart = function () {\n      var rand = 1 + Math.random() * (5 - 1);\n      var items = [\"T-Shirt\", \"Jean\", \"Basket\", \"Socks\", \"Glasses\", \"Hat\", \"Pull\", \"Watch\"];\n      _this.cartState = \"\";\n      console.log(_this.uid);\n\n      for (var i = 0; i < rand; ++i) {\n        var pos = Math.round(Math.random() * 7);\n\n        _this.cartItem.push(items[pos]);\n\n        _this.cartState += \"1 \" + items[pos] + \" \";\n      }\n\n      _this.setState(_defineProperty({}, \"\", \"\"));\n    };\n\n    _this.sendCart = function () {\n      var cartItem = _this.cartItem;\n\n      _this.props.firebase.cart(_this.uid).set({\n        cartItem: cartItem\n      }).then(function () {\n        _this.cartState = \"No item in your card\";\n        _this.activeCart = _this.cartItem;\n        _this.cartItem = [];\n\n        _this.setState(_defineProperty({}, \"\", \"\"));\n      }).catch(function (error) {\n        _this.setState({\n          error: error\n        });\n      });\n    };\n\n    _this.cartState = \"No item in your cart\";\n    _this.cartItem = [];\n    _this.activeCart = [];\n    return _this;\n  }\n\n  _createClass(HomePageBase, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.uid = this.props.context.uid;\n      this.props.firebase.cart(this.uid).once('value', function (data) {\n        data.forEach(function (child) {\n          _this2.activeCart = child.val();\n        });\n        console.log(_this2.activeCart);\n\n        _this2.setState(_defineProperty({}, \"\", \"\"));\n      }).catch(function (error) {\n        _this2.setState({\n          error: error\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var listItems = this.activeCart.map(function (item) {\n        return React.createElement(\"li\", {\n          key: \"{item}\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95\n          },\n          __self: this\n        }, item, \" lol\");\n      });\n      var cartState = this.cartState;\n      var isInvalid = cartState === \"No item in your cart\";\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"randomCart\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, cartState && React.createElement(\"p\", {\n        name: \"cartState\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, cartState), React.createElement(\"div\", {\n        className: \"buttonCart\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"randomBtn\",\n        onClick: this.createRandomCart,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, \"Create a random cart\"), React.createElement(\"button\", {\n        disabled: isInvalid,\n        className: \"validateBtn\",\n        onClick: this.sendCart,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, \"Validate cart\"))), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"activeCart\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, listItems)));\n    }\n  }]);\n\n  return HomePageBase;\n}(Component);\n\nvar Home = compose(withRouter, withFirebase)(HomePageBase);\n\nvar condition = function condition(authUser) {\n  return !!authUser;\n}; //export default HomePage;\n\n\nexport { Home };\n\nvar authCondition = function authCondition(authUser) {\n  return !!authUser;\n};\n\nexport default withAuthorization(authCondition)(HomePage);","map":{"version":3,"sources":["/home/boyban/Epitech/Tek3/Part-Time/technical-test-gustave/src/components/Home/index.js"],"names":["React","Component","withRouter","compose","withFirebase","SignInPage","ROUTES","AuthUserContext","withAuthorization","HomePage","authUser","HomePageBase","props","onChange","event","setState","target","name","value","createRandomCart","rand","Math","random","items","cartState","console","log","uid","i","pos","round","cartItem","push","sendCart","firebase","cart","set","then","activeCart","catch","error","context","once","data","forEach","child","val","listItems","map","item","isInvalid","Home","condition","authCondition"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { compose } from 'recompose';\nimport './style.css'\n\nimport { withFirebase } from '../Firebase';\nimport SignInPage from \"../SignIn\";\nimport * as ROUTES from \"../../constants/routes\";\nimport AuthUserContext from \"../Session/context\";\nimport withAuthorization from \"../Session/withAuthorization\";\n\nconst HomePage = () => (\n    <div>\n        <AuthUserContext.Consumer>\n            { authUser => (<Home context={authUser}/>) }\n        </AuthUserContext.Consumer>\n\n    </div>\n);\n\nclass HomePageBase extends Component {\n    constructor(props) {\n        super(props);\n\n        this.cartState = \"No item in your cart\";\n        this.cartItem = [];\n        this.activeCart = [];\n    }\n\n    componentDidMount() {\n        this.uid = this.props.context.uid;\n        this.props.firebase\n            .cart(this.uid)\n            .once('value', data => {\n                data.forEach(child => {\n                   this.activeCart = child.val();\n                });\n                console.log(this.activeCart);\n                this.setState({ [\"\"]: \"\" });\n            })\n            .catch(error => {\n                this.setState({ error });\n            });\n    }\n\n    onChange = event => {\n        this.setState({ [event.target.name]: event.target.value });\n    };\n\n    createRandomCart = () => {\n        let rand =  1 + (Math.random() * (5-1));\n        let items = [\n            \"T-Shirt\",\n            \"Jean\",\n            \"Basket\",\n            \"Socks\",\n            \"Glasses\",\n            \"Hat\",\n            \"Pull\",\n            \"Watch\",\n        ];\n        this.cartState = \"\";\n\n        console.log(this.uid);\n        for (let i = 0; i < rand; ++i) {\n            let pos = Math.round(Math.random() * 7);\n            this.cartItem.push(items[pos]);\n            this.cartState += \"1 \" + items[pos] + \" \" ;\n        }\n        this.setState({ [\"\"]: \"\" });\n    };\n\n    sendCart = () => {\n        let cartItem = this.cartItem;\n        this.props.firebase\n            .cart(this.uid)\n            .set({\n                cartItem\n            })\n            .then(() => {\n                this.cartState = \"No item in your card\";\n                this.activeCart = this.cartItem;\n                this.cartItem = [];\n                this.setState({ [\"\"]: \"\" });\n            })\n            .catch(error => {\n                this.setState({ error });\n            });\n\n    };\n\n    render() {\n        var listItems = this.activeCart.map(function(item) {\n            return (\n                <li key=\"{item}\">\n                    {item} lol\n                </li>\n            );\n        });\n        const cartState = this.cartState;\n        const isInvalid = cartState === \"No item in your cart\";\n        return (\n            <div>\n                <div className=\"randomCart\">\n                    {cartState && <p name=\"cartState\">{cartState}</p>}\n                    <div className=\"buttonCart\">\n                        <button className=\"randomBtn\" onClick={this.createRandomCart}>Create a random cart</button>\n                        <button disabled={isInvalid} className=\"validateBtn\" onClick={this.sendCart}>Validate cart</button>\n                    </div>\n                </div>\n                <hr />\n\n                <div className=\"activeCart\">\n                    <ul>\n                        { listItems }\n                    </ul>\n                </div>\n            </div>\n        )\n    }\n}\n\nconst Home = compose(\n    withRouter,\n    withFirebase,\n)(HomePageBase);\n\nconst condition = authUser => !!authUser;\n\n//export default HomePage;\n\nexport { Home };\n\nconst authCondition = authUser => !!authUser;\nexport default withAuthorization(authCondition)(HomePage);"]},"metadata":{},"sourceType":"module"}